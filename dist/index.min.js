!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("js-cookie")):"function"==typeof define&&define.amd?define(["js-cookie"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).XYStorage=t(e.Cookies)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,f(e,t,"get"))}function c(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,f(e,t,"set"),n),n}function f(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function h(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function v(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p(e,t,n){v(e,t),t.set(e,n)}function d(e,t){v(e,t),t.add(e)}var y=function(e){return"[object Number]"===Object.prototype.toString.call(e)},m=function(e){return"[object Date]"===Object.prototype.toString.call(e)},b=function(e){return"cookie"===e},g=new WeakMap,w=new WeakMap,O=new WeakSet,j=new WeakSet,S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,j),d(this,O),p(this,g,{writable:!0,value:void 0}),p(this,w,{writable:!0,value:void 0}),c(this,w,i({name:"local",namespace:"",attrs:null},t)),c(this,g,h(this,O,k).call(this,s(this,w).name))}var t,n,r;return t=e,n=[{key:"setItem",value:function(e,t){var n,r,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(a=i(i({},null!==(n=null===(r=s(this,w))||void 0===r?void 0:r.attrs)&&void 0!==n?n:{}),null!==(o=a)&&void 0!==o?o:{}),b(s(this,w).name))s(this,g).set(h(this,j,D).call(this,e),JSON.stringify({value:t}),a);else{var l=a,u=l.expires,c=null,f=null;u&&(y(u)&&((c=new Date).setDate(c.getDate()+u),f=new Date(c)),m(u)&&(f=u)),t=JSON.stringify({value:t,expires:f}),s(this,g).setItem(h(this,j,D).call(this,e),t)}}},{key:"getItem",value:function(e){var t,n,r,i,o,a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(s(this,w).name)?""!==(t=s(this,g).get(h(this,j,D).call(this,e)))&&void 0!==t&&null!==(n=null===(r=JSON.parse(t))||void 0===r?void 0:r.value)&&void 0!==n?n:l:null===(null===(i=t=JSON.parse(s(this,g).getItem(h(this,j,D).call(this,e))||"{}"))||void 0===i?void 0:i.expires)||new Date(null===(o=t)||void 0===o?void 0:o.expires).getTime()>=(new Date).getTime()?null===(a=t)||void 0===a?void 0:a.value:(this.removeItem(e),l)}},{key:"removeItem",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b(s(this,w).name)?s(this,g).remove(h(this,j,D).call(this,e),i(i({},null!==(t=null===(n=s(this,w))||void 0===n?void 0:n.attrs)&&void 0!==t?t:{}),null!=r?r:{})):s(this,g).removeItem(h(this,j,D).call(this,e))}},{key:"clear",value:function(){var e;if(b(s(this,w).name))console.error("Cookies do not support the clear method");else{var t=null!==(e=s(this,g).length)&&void 0!==e?e:0;if(0!==t){for(var n=[],r=0;r<t;r++){var i=s(this,g).key(r),o=new RegExp("^".concat(s(this,w).namespace,"(.+)"),"i");if(!1!==o.test(i)){var a=l(i.match(o),2);a[0];var u=a[1];n.push(u)}}for(var c in n)this.removeItem(n[c])}}}}],n&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e){var t=new Map;return t.set("local",localStorage),t.set("session",sessionStorage),t.set("cookie",n.default),t.get(e)}function D(e){return"".concat(s(this,w).namespace).concat(e)}return S}));
